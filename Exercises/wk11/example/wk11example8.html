<!DOCTYPE html>
<html>

<head>
    <title>Event</title>
    <!-- using CDN -->
    <script src="https://unpkg.com/vue@next"></script>
</head>

<body>
    <div id="app">
        <div :style="{ fontSize: fontSize + 'em' }">
            <!-- now instead of specifying inline, it passes to method called onEnlarge with value as in line 55 -->
            <!-- so now when emit enlarge or shrink is called it is passed back into main app methods -->
            <product v-for="product in products" v-bind:key="product.id" v-bind:prod="product"
                v-on:enlarge="onEnlarge" @shrink="onShrink"></product>
           
        </div>
    </div>

    <script>
        const app = Vue.createApp({
            data() {
                return {
                    products: [
                        { id: 1, name: 'iPhone', desc: '<p>This is the best phone in the world!</p>' },
                        { id: 2, name: 'Samsung', desc: '<p>No, mine is the best!</p>' },
                        { id: 3, name: 'Oppo', desc: '<p>Mine is cheaper and yet as good!</p>' }
                    ],
                    fontSize: 1
                }
            },
            methods: {
                onEnlarge: function (enlargeAmount) {
                    this.fontSize += enlargeAmount
                    document.getElementById("something").setAttribute("class", "haha")
                }, // this is also a valid vue method syntax

                onShrink(shrinkAmount) {
                    this.fontSize -= shrinkAmount
                }
            }
        })

        app.component('product', {
            props: ['prod'],// specifying the inputs

            /* 
                Quote https://v3.vuejs.org/guide/component-custom-events.html#defining-custom-events
                >> It is recommended to define all emitted events in order to 
                >> better document how a component should work.
            */
            emits: ['enlarge', 'shrink'],// specifying hte output that this comp generates

            template: `<div class='product'>
                        <h3>{{ prod.name }}</h3> 
                        <button v-on:click="$emit('enlarge', 0.1)">
                           Enlarge text </button>

                        <button v-on:click="doShrink()">
                            Shrink text </button>    

                        <div v-html='prod.desc'></div></div>`,

            methods: {
                doShrink() {
                    // Another way to emit events.
                    this.$emit('shrink', 0.1);
                }
            }
        })

        // IMPORTANT NOTE: Vue Component MUST BE declared before mounting the Vue app.
        
        app.mount('#app')
    </script>
</body>

</html>